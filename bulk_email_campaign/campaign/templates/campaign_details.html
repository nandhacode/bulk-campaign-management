{% extends "base.html" %}

{% block title %}
<title>Campaign List</title>
{% endblock %}

{% block content %}
<div class="campaign_list_wrapper">
<h2>{{ campaign.name }}</h2>

<p><b>Status:</b> {{ campaign.status }}</p>
<p><b>Subject:</b> {{ campaign.subject }}</p>
<p><b>Scheduled:</b> {{ campaign.scheduled_time }}</p>

<h3>Email Logs</h3>

<table class="table">
  <thead class="thead-dark">
    <tr>
        <th scope="col">#</th>
        <th scope="col">Recipient</th>
        <th scope="col">Status</th>
        <th scope="col">Reason</th>
        <th scope="col">Time</th>
    </tr>
  </thead>
  <tbody>
    {% if logs %}
        {% for log in logs %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ log.recipient.email }}</td>
            <td>{{ log.status }}</td>
            {% if log.failure_reason %}
            <td>{{ log.failure_reason }}</td>
            {% else %}
            <td>Successfully Sent</td>
            {% endif %}
            <td>{{ log.created_at }}</td>
        </tr>
        {% endfor %}
    {% else %}
        <tr>
            <td style="text-align: center" colspan="5">Currently No logs available</td>
        </tr>
    {% endif %}
  </tbody>
</table>
</div>

{% if message %}
    <p>{{ message }}</p>
{% endif %}
{% endblock %}